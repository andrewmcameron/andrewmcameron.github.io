<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>coding &amp; analysis</title>

<script src="site_libs/header-attrs-2.26/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="site_libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script src="site_libs/FlatGeoBuf-3.21.3/fgb.js"></script>
<script src="site_libs/FlatGeoBuf-3.21.3/flatgeobuf-geojson.min.js"></script>
<script src="site_libs/chromajs-2.1.0/chroma.min.js"></script>
<link id="Forest_Study_Sites-1-attachment" rel="attachment" href="site_libs/Forest_Study_Sites-0.0.1/Forest_Study_Sites_layer.fgb"/>
<link href="site_libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="site_libs/HomeButton-0.0.1/home-button.js"></script>
<script src="site_libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="site_libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="site_libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="site_libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<link id="Grassland_Study_Sites-1-attachment" rel="attachment" href="site_libs/Grassland_Study_Sites-0.0.1/Grassland_Study_Sites_layer.fgb"/>
<!-- custom_header.html -->

<!-- fonts -->
  <!-- caveat -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@600&display=swap" rel="stylesheet">

  <!-- Kanit -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  
  <!-- Roboto --> 
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">home</a>
</li>
<li>
  <a href="projects.html">projects</a>
</li>
<li>
  <a href="CV.pdf">resume</a>
</li>
<li>
  <a href="aboutme.html">about me</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">coding &amp; analysis</h1>

</div>


<style>
h1.title {
    font-family: 'Kanit', sans-serif;
    font-weight: 600;
    font-style: normal;
    font-size: 62px;
    letter-spacing: 8px; 
    text-align:center;
}

h2 {
    font-family: 'Kanit', sans-serif;
    font-weight: 500;
    font-style: normal;
}

h3 {
    font-family: 'Kanit', sans-serif;
    font-weight: 380;
    font-style: normal;
}

.text {
      font-family: 'Roboto', sans-serif;
      font-weight: 400;
      font-size: 24px
      letter-spacing: 1.15px;
      text-align:center;
      }
      
.text2 {
      font-family: 'Roboto', sans-serif;
      font-weight: 400;
      font-size: 24px
      letter-spacing: 1.15px;
      }

.row {
  display: flex;
  flex-wrap: wrap; /* Allows items to wrap */
  justify-content: center; /* Centers items horizontally, adjust as needed */
}

.column {
  flex: 1; /* Adjust this to control how columns grow */
  max-width: 45%; /* Maximum width of each column */
  padding: 5px;
  box-sizing: border-box; /* Includes padding in the element's total width and height */
}
</style>
<hr>
<p>R and RStudio are essential components of most (if not all) of my
workflows. From geospatial projects and data analysis, to data
visualizations and producing documents and reports, R is an incredibly
powerful tool. Here are some examples of ways I have used R to conduct
my own analysis, provide research support, assist colleagues, and for my
own pet projects. You can also check out some source code for the
projects in knitted R Markdown files.</p>
<br>
<hr>
<p><br></p>
<div id="climate-change-effects-on-virginia-reservoirs"
class="section level2" style="text-align: center;">
<h2>climate change effects on Virginia reservoirs</h2>
</div>
<div style="text-align: center; margin-top: 20px; margin-bottom: 15px;">
<p><a href="media/animatedplot.gif" target="blank"><img src="media/reservoirAnalysisMap.jpg" alt="VA watersheds and trend analysis sites" width="650" style="box-shadow: -3px -3px 10px rgba(0,0,0,0.2);"></a></p>
</div>
<p>My most recent project for the Bukaveckas Lab at VCU involved
analyzing the effects of climate change on Virginia reservoirs. Between
February and July of 2024 I contributed to a forthcoming peer-reviewed
publication that examines the effects of climate change on reservoirs
throughout Virginia. This involved carrying out median-based linear
modeling (MBLM) to assess long-term trends in temperature and dissolved
oxygen at 41 lake stations across the state. MBLM was selected for its
robustness to outliers, which ensured more reliable results in the
presence of irregular data points, occurring either as a result of
extreme weather conditions or instrument error. The analysis was based
on a large data set from Virginia Department of Environmental Quality
comprising ~19,00 profiles from over 500 stations across more than 100
reservoirs in the state. The stations selected for the study were chosen
based on their having at least 100 profiles available for analysis. For
each station, month-by-month trends from May to October were calculated,
along with intra-annual trends focusing on the period from April to
August each year.</p>
<p>I really enjoyed this project, not only because it gave me a chance
to learn about and apply a new statistical method in the context of
valuable climate-focused research, but because it presented me with some
opportunities for data visualization and applying my GIS and spatial
analysis chops. Exploratory analysis involved, among other things,
testing various environmental factors, such as latitude, longitude, to
uncover potential spatial gradients and temporal patterns that might
explain variability in the data. I had a rewarding - if rather
challenging - experience trying to create a plot, using our data, based
on a figure from another publication. This involved some pretty advanced
<code>ggplot2</code> concepts to achieve the desired formatting and
layout. Plus, I got to make a cool map (!) for publication that shows
the locations of the trend analysis sites and the watersheds they are
located in. This gave me a chance to try to develop a compelling color
scheme and layout that was be both visually appealing and
informative.</p>
<p>All in all, this project is built on quite a few Markdown files.
Below are a couple of examples.</p>
<ul>
<li><b><a href="portfolio/DOMin_Mean_Range_trends.html" target="blank">source
code for deriving DO trends and producing corresponding box-whisker
plots </a></b></li>
<li><b><a href="portfolio/longTermAnnualTrends_AprtoAug.html" target="blank">source
code for deriving Apr to Aug site trends + generating plot</a></b></li>
</ul>
<br>
<hr>
<p><br><br> <!-- NEW SECTION --></p>
<div id="visualizing-water-temperature-over-time" class="section level2"
style="text-align: center;">
<h2>visualizing water temperature over time</h2>
</div>
<div style="text-align: center; margin-top: 20px; margin-bottom: 15px;">
<p><a href="media/animatedplot.gif" target="blank"><img src="media/animatedplot.gif" alt="model predictive success" width="650" style="box-shadow: -3px -3px 10px rgba(0,0,0,0.2);"></a></p>
</div>
<p>Another fun and challenging project I was able to do for the
Bukaveckas Lab involved combining 15 years of water quality monitoring
data to generate daily mean summary statistics for select variables, as
well as produce an animated plot depicting seasonal patterns and
inter-annual variation in water temperature at VCU’s Rice River Center
monitoring station.</p>
<p>This required quite a bit of wrangling and problem solving to get
from A to B. I made extensive use of nested list structures to organize
and manage the data, which allowed me to systematically separate and
categorize data by year and tab across and within Excel workbook files.
This was critical given the inconsistency in the data schema and
variable naming conventions over the 15 years that data were
collected.</p>
<p>I was already familiar with R’s <code>ggplot2</code> before beginning
this project, but the need for a dynamic plot gave me the chance to
explore the <code>gganimate</code> package - something I look forward to
doing more of in the future!</p>
<ul>
<li><b><a href="portfolio/james_longterm.html" target="blank">data
wrangling source code</a></b></li>
<li><b><a href="portfolio/animatedplot.html" target="blank">animated
plot source code</a></b></li>
</ul>
<br>
<hr>
<p><br><br> <!-- NEW SECTION --></p>
<div id="bird-diversity-in-grassland-vs-forest-ecosystems"
class="section level2" style="text-align: center; font-size: 17px;">
<h2>bird diversity in grassland vs forest ecosystems</h2>
<div
id="class-level-landscape-metrics-as-predictors-of-avian-species-richness"
class="section level3">
<h3>class-level landscape metrics as predictors of avian species
richness</h3>
</div>
</div>
<div class="text2">
<p>For this analysis, completed as the final project for landscape
ecology (ENVS 591) during the fall of 2023 at VCU, I was interested in
exploring the extent to which class-level landscape metrics differ in
their ability to explain variation in avian species richness (total # of
different species) in grassland ecosystems versus forest ecosystems.</p>
<p>The whole project was carried out using <strong>R</strong> in
RStudio, and was a great opportunity to conduct a spatial analysis
outside of a point-and-click GIS environment. Not using ArcGIS Pro meant
not enjoying the convenience of ‘on-the-fly projection’, which required
me to be especially attentive to coordinate reference systems and
projections as I prepared spatial data from different sources for
analysis. I also became familiar with a number of great spatial R
packages and APIs, including <code>mapview</code>, <code>terra</code>,
<code>sf</code>, <code>raster</code>, <code>FedData</code>, and
<code>landscapemetrics</code>.</p>
<p>This project gave me a chance to work with data sets from the
National Ecology Observatory Network (NEON), a comprehensive ecological
monitoring program that collects standardized, high-quality data from
diverse ecosystems across the United States.</p>
<p>Check out the maps below - which I made in R using the
<code>mapview</code> package - to see the NEON sites used in my
analysis.</p>
<div class="row">
<div class="col-md-6">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-820d316ab3decc045da4" style="width:384px;height:384px;"></div>
<script type="application/json" data-for="htmlwidget-820d316ab3decc045da4">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addFlatGeoBuf","args":["Forest_Study_Sites","Forest Study Sites",null,true,"studyarea",{"radius":3.5,"stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":null,"fillOpacity":0.6},{"className":"","pane":"point"},"mapview-popup",{"radius":{"to":[3,15],"from":[3,15]},"weight":{"to":[1,10],"from":[1,10]},"opacity":{"to":[0,1],"from":[0,1]},"fillOpacity":{"to":[0,1],"from":[0,1]}},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-78.175704,38.865796,-76.524078,39.087919,true,"Forest Study Sites","Zoom to Forest Study Sites","<strong> Forest Study Sites <\/strong>","bottomright"]},{"method":"addLayersControl","args":["CartoDB.Positron","Forest Study Sites",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#ED6A5E","#E9D985","#007991"],"labels":["Blandy Experimental Forest","Smithsonian Conservation Bio. Inst.","Smithsonian Experimental Research Center"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"Forest Study Sites","extra":null,"layerId":null,"className":"info legend","group":"Forest Study Sites"}]}],"fitBounds":[38.865796,-78.175704,39.087919,-76.524078,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
<div class="col-md-6">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-069a47d7f506a9271c45" style="width:384px;height:384px;"></div>
<script type="application/json" data-for="htmlwidget-069a47d7f506a9271c45">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addFlatGeoBuf","args":["Grassland_Study_Sites","Grassland Study Sites",null,true,"studyarea",{"radius":3.5,"stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":null,"fillOpacity":0.6},{"className":"","pane":"point"},"mapview-popup",{"radius":{"to":[3,15],"from":[3,15]},"weight":{"to":[1,10],"from":[1,10]},"opacity":{"to":[0,1],"from":[0,1]},"fillOpacity":{"to":[0,1],"from":[0,1]}},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-96.647329,39.034674,-95.19004,39.227868,true,"Grassland Study Sites","Zoom to Grassland Study Sites","<strong> Grassland Study Sites <\/strong>","bottomright"]},{"method":"addLayersControl","args":["CartoDB.Positron","Grassland Study Sites",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#0000CD","#EE8262","#66CDAA"],"labels":["Konza Prairie Agroecosystem","Konza Prairie Biological Station","University of Kansas Field Station"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"Grassland Study Sites","extra":null,"layerId":null,"className":"info legend","group":"Grassland Study Sites"}]}],"fitBounds":[39.034674,-96.647329,39.227868,-95.19004,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
<p><br></p>
<p>My analysis used three years of data (2019-2021) from three separate
study areas in each of the two landscape types. Study areas comprised
10-20 distinct study plots, with each ‘plot-year’ combination
representing a unique sampling event (n=228). For each plot-year, I
derived the total number of bird species observed. I pulled in National
Land Cover Data using <code>FedData</code> and generated buffers around
each plot-year at 200m, 500m, 1000m, and 2000m in order to assess the
influence of landscape metrics at different spatial scales.</p>
<p>Before calculating landscape metrics I first reclassified the NLCD
data using a reclassification matrix to produce new raster datasets with
simplified land cover categories (forest, agricultural, and urban). I
then used the <code>landscapemetrics</code> package to calculate 5
class-level metrics for each buffer size:</p>
<div style="text-align: center; margin-top: 30px; margin-bottom: 30px;">
<figcaption style="text-align: center; font-size: .87em;">
<i>Data preprocessing R workflow</i>
</figcaption>
<p><img src="media/le_flow.png" style="border:1px solid #8896AB; width:675px;"></p>
</div>
<p>Five landscape metrics across four buffer sizes produced a total of
20 variables to be considered as potential predictors of species
richness in each ecosystem type. Given time constraints, I took a bit of
a shortcut to select variables for modelling. I utilized a tiered
hierarchical approach by applying the <code>corSelect()</code> function
from the <code>fuzzySim</code> package (v. 4.10.5). Minimally correlated
variables were first selected at each spatial extent and those selected
variables were then further evaluated together to make a final
selection. The approach was pragmatic, but I would like to eventually
return to this analysis and tailor variable selection by better
integrating domain-specific ecological knowledge.</p>
<p>With variables selected, I applied a generalized linear mixed model
approach to incorporate <em>study</em> area as a random effect. This
produced a ‘singular fit’, however, indicating that the model was
overfitted – that is, the random effects structure was too complex to be
supported by the data. Instead, I utilized multiple regression to fit
models for every possible combination of predictor variable, then
compared models using AIC to select the top performers and identify the
most important predictors.</p>
<p><b>tl;dr version</b></p>
<ul>
<li>In mid-Atlantic forests, only elevation and % forest cover were
found to be significant predictors of avian species richness.</li>
<li>In grasslands, both PLAND at 1000m and AI at 1000m were found to be
significant predictors.</li>
<li>A significantly higher amount of variation in avian species richness
was explained by grassland model (42.6%) than forest models
(&lt;12%).</li>
</ul>
<p>Here’s a <b><a href="portfolio/le_final.pdf" taget="_blank">PDF
version of a presentation</a></b> that gives a more detailed look at
some of the results.</p>
</div>
<br>
<hr>
<p><br><br> <!-- NEW SECTION --></p>
<div id="gun-data-preprocessing-automation" class="section level2"
style="text-align: center;">
<h2>gun data preprocessing automation</h2>
</div>
<div class="row">
<div style="text-align: center; margin-top: 20px; margin-bottom: 15px;">
<p><img src="media/gunmap.png" alt="model predictive success" width="750" 
  style="box-shadow: -3px -3px 10px rgba(0,0,0,0.2);"></p>
</div>
</div>
<p>The
<a href="https://andrewmcameron.github.io/geospatial.html#urban_gun_crime">urban
gun crime work</a> that I did during my time as a member of the City of
Newport News GIS team gave me the chance to carry out some interesting
spatial analyses and work on developing several apps with the Esri tool
kit, including Experience Builder, Dashboards, and web maps (none of
which are public-facing, unfortunately). But in order to get to that
point, the data generated from the police department’s record management
system query first needed substantial massaging and preparation.</p>
<p>To accommodate the need for re-running analyses and updating the
dashboard annually or semi-annually with new data, I developed a script
to automate the otherwise laborious task of preprocessing the raw RMS
query outputs. I wrote the script in a heavily annotated R Markdown
file, so that future users can easily interact with it using RStudio’s
‘visual’ mode and execute the code with little to no knowledge of R
required. The user needs only to define two variables: a new folder name
and the path of the Excel workbook file containing the raw data. The
script takes care of the rest. The end result is two CSV files ready to
be brought into ArcGIS Pro and geocoded.</p>
<ul>
<li><b><a href="portfolio/Script1_InitialDataProcessing.html" target="blank">source
code</a></b></li>
</ul>
<br>
<hr>
<p><br><br> <!-- NEW SECTION --></p>
<div id="modelling-estuarine-algal-blooms" class="section level2"
style="text-align: center;">
<h2>modelling estuarine algal blooms</h2>
</div>
<div style="text-align: center; margin-top: 20px; margin-bottom: 15px;">
<p><a href="media/chla_modelsuccess.png" target="blank"><img src="media/chla_modelsuccess.png" alt="model predictive success" width="600" style="box-shadow: -3px -3px 10px rgba(0,0,0,0.2);"></a></p>
</div>
<p>I’ve been fortunate to be able to provide water quality research
assistance to the
<a href="https://blogs.vcu.edu/pabukaveckas/" target="blank">Bukaveckas
Lab</a> at Virginia Commonwealth University, in the form of program
scripting, data analysis, and data visualization, since December of
2023.</p>
<p>Among other projects, I developed a script to facilitate the
longitudinal analysis and modeling of
<a href="https://blogs.vcu.edu/pabukaveckas/research/james-river-ecosystem-study/" target="_blank">chlorophyll
a (CHLa) levels in the James River</a> using multiple linear and
nonlinear approaches.</p>
<p>The knitted HTML output contains tables with summary statistics for
the all years in the data set; regression statistics for all years
combined, as well as individual years, by model; model plots with best
fit line; model-specific time series plots; and time series plots for
CHLa and dissolved organic nitrogen.</p>
<p>The script is designed to dynamically adapt to changes in the
dataset, accommodating new data from subsequent years without requiring
manual updates to its structure or content.</p>
<p>More detailed program documenation is available
<a href="https://github.com/andrewmcameron/modelling-algalBlooms/blob/main/README.md" target="_blank">on
my Github page</a>.</p>
<ul>
<li><b><a href="portfolio/chla_script_noEval.html" target="_blank">source
code</a></b></li>
</ul>
<br>
<hr>
<p><br><br> <!-- NEW SECTION --></p>
<div id="intro-to-osmdata" class="section level2"
style="text-align: center;">
<h2>intro to <code>osmdata</code></h2>
</div>
<p>This was less a coding project and more a way to help folks in my
office use some basic coding to programmatically access the
<a href="https://www.openstreetmap.org/#map=11/42.1759/-71.4407" target="blank">OpenStreetMap</a>
database.</p>
<p>Newport News, VA has an amazing
<a href="https://geohub.nnva.gov/" target="_blank">Geohub site</a>, but
- for obvious reasons - the city does not maintain spatial data layers
on <em>every</em> feature that exists in the city. After a colleague
shared in a meeting that she had to quickly put together a suitability
analysis using features that she pulled in from multiple sources around
the web - e.g., shopping, grocery stores, cinemas, bowling alleys, and
sundry other sites for leisure activities - it occurred to me that the
GIS team could benefit from being able to leverage the OpenStreetMap API
in this sort of situation, should it arise again in the future.</p>
<p>I created a tutorial, adapting from this
<a href="https://cran.r-project.org/web/packages/osmdata/vignettes/osmdata.html" target="blank">excellent
and more comphrensive vignette</a></b> on the CRAN website, for using
R’s <code>osmdata</code> package. It is written with the goal that
someone who had never used R or RStudio before would nevertheless be
able to access the API, pull in the data they are looking for, and
export it as a JSON that they can pull into the ArcGIS Pro environment
for use in mapping and analysis.</p>
<ul>
<li><b><a href="portfolio/OSMdata_tutorial.html" target="blank"><code>osmdata</code>
tutorial</a></b></li>
</ul>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
